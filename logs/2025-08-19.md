↳ exit 0

### Command @ 2025-08-19 13:23:02 EDT
**# Probe status codes (200 expected)
for u in \
  https://raw.githubusercontent.com/ishist/context-vault/main/docs/customize.md \
  https://raw.githubusercontent.com/ishist/context-vault/main/docs/file-index.md
printf "%3s  %s\n" (curl -I -s -o /dev/null -w "%{http_code}" $u) $u
end**
↳ exit 0

### Command @ 2025-08-19 13:23:15 EDT
**# Fetch to a dated scratch and preview safely
set d (date +%F)
mkdir -p ~/Downloads/$d-context-vault && cd ~/Downloads/$d-context-vault
**
↳ exit 0

### Command @ 2025-08-19 13:23:38 EDT
**for u in \
  https://raw.githubusercontent.com/ishist/context-vault/main/docs/customize.md \
  https://raw.githubusercontent.com/ishist/context-vault/main/docs/file-index.md
echo "-> "(basename $u)
curl -fsS --retry 3 --retry-delay 2 -o (basename $u) $u
end**
↳ exit 0

### Command @ 2025-08-19 13:23:50 EDT
**for u in \
  https://raw.githubusercontent.com/ishist/context-vault/main/docs/customize.md \
  https://raw.githubusercontent.com/ishist/context-vault/main/docs/file-index.md
echo "-> "(basename $u)
curl -fsS --retry 3 --retry-delay 2 -o (basename $u) $u
end**
↳ exit 0
↳ exit 0

### Command @ 2025-08-19 13:37:02 EDT
**micro customize.md**
↳ exit 0

### Command @ 2025-08-19 13:43:22 EDT
**cd ..**
↳ exit 0

### Command @ 2025-08-19 13:43:28 EDT
**mkdir -p patches**
↳ exit 0

### Command @ 2025-08-19 13:43:57 EDT
**micro patches/customize-metadata-and-fix.patch**
↳ exit 0

### Command @ 2025-08-19 13:44:34 EDT
**cat patches/customize-metadata-and-fix.patch | cgpt -t2 diff**
↳ exit 0

### Command @ 2025-08-19 13:44:45 EDT
**# Preview the patch contents (trimmed for chat)
cat patches/customize-metadata-and-fix.patch | cgpt -t2 diff

# Dry run first
git apply --check patches/customize-metadata-and-fix.patch

# If no errors:
git apply patches/customize-metadata-and-fix.patch

# Inspect what changed
git diff -- docs/customize.md | cgpt -t2 diff**
↳ exit 0

### Command @ 2025-08-19 13:45:59 EDT
**# Save patch file
set p patches/customize-insert-sections.patch
mkdir -p (dirname $p)
begin
echo '--- a/docs/customize.md'
echo '+++ b/docs/customize.md'
echo '@@'
echo '-## Spec Maintenance'
echo '+## Spec Metadata'
echo '+- Last updated: 2025-08-19'
echo '+- Version: 0.1.0'
echo '+'
echo '+## Paths & Locations'
echo '+- Context Vault repo: `~/context-vault`'
echo '+- ctx* helpers live in: `~/bin` (on PATH) and/or `~/.config/fish/functions/` (document actual install)'
echo '+'
echo '+## cgpt Quick Reference'
echo '+- Clean + trim head/tail with language tag:'
echo '+  ```fish'
echo '+  some_command | cgpt -t2 md'
echo '+  ```'
echo '+  Use `-t` for head-only. Warn before pasting very large outputs.'
echo '+'
echo '+## Spec Maintenance'
end > $p

# Dry-run then apply
git apply --check $p
git apply $p

# Review & commit
git diff -- docs/customize.md | cgpt -t2 diff
git add docs/customize.md
git commit -m "docs(customize): add metadata, paths, and cgpt quick reference sections"**
↳ exit 0

### Command @ 2025-08-19 13:46:43 EDT
**set p patches/customize-insert-sections.patch
mkdir -p (dirname $p)
begin
echo '--- a/docs/customize.md'
echo '+++ b/docs/customize.md'
echo '@@'
echo '-## Spec Maintenance'
echo '+## Spec Metadata'
echo '+- Last updated: 2025-08-19'
echo '+- Version: 0.1.0'
echo '+'
echo '+## Paths & Locations'
echo '+- Context Vault repo: `~/context-vault`'
echo '+- ctx* helpers live in: `~/bin` (on PATH) and/or `~/.config/fish/functions/` (document actual install)'
echo '+'
echo '+## cgpt Quick Reference'
echo '+- Clean + trim head/tail with language tag:'
echo '+  ```fish'
echo '+  some_command | cgpt -t2 md'
echo '+  ```'
echo '+  Use `-t` for head-only. Warn before pasting very large outputs.'
echo '+'
echo '+## Spec Maintenance'
end > $p**
↳ exit 0

### Command @ 2025-08-19 13:46:49 EDT
**git apply --check $p
git apply $p**
↳ exit 0

### Command @ 2025-08-19 13:46:57 EDT
**git apply --check $p**
↳ exit 0

### Command @ 2025-08-19 13:49:11 EDT
**git diff -- docs/customize.md | cgpt -t2 diff**
↳ exit 0

### Command @ 2025-08-19 13:49:28 EDT
**git add docs/customize.md**
↳ exit 0

### Command @ 2025-08-19 13:49:34 EDT
**git commit -m "docs(customize): add metadata, paths, and cgpt quick reference sections"**
↳ exit 0

### Command @ 2025-08-19 14:16:51 EDT
**micro patches/customize-insert-sections.patch**
↳ exit 0

### Command @ 2025-08-19 14:17:30 EDT
**git apply --check patches/customize-insert-sections.patch**
↳ exit 0

### Command @ 2025-08-19 14:19:35 EDT
**cd ~/context-vault
set tmp (mktemp)

# Only insert if not already present
if not grep -q '^## Spec Metadata$' docs/customize.md
awk '
  BEGIN{done=0}
  /^## Spec Maintenance$/ && !done {
    print "## Spec Metadata";
    print "- Last updated: 2025-08-19";
    print "- Version: 0.1.0";
    print "";
    print "## Paths & Locations";
    print "- Context Vault repo: `~/context-vault`";
    print "- ctx* helpers live in: `~/bin` (on PATH) and/or `~/.config/fish/functions/` (document actual install)";
    print "";
    print "## cgpt Quick Reference";
    print "- Clean + trim head/tail with language tag:";
    print "  ```fish";
    print "  some_command | cgpt -t2 md";
    print "  ```";
    print "  Use `-t` for head-only. Warn before pasting very large outputs.";
    print "";
    print "## Spec Maintenance";
    done=1; next
  }
  {print}
  ' docs/customize.md > $tmp
mv $tmp docs/customize.md
else
echo "Metadata/paths/cgpt sections already present; skipping"
end

# Preview change safely
git diff -- docs/customize.md | cgpt -t2 diff
**
↳ exit 0

### Command @ 2025-08-19 14:19:51 EDT
**git add docs/customize.md
git commit -m "docs(customize): add metadata, paths, and cgpt quick reference sections"
**
↳ exit 0

### Command @ 2025-08-19 14:20:51 EDT
**awk '/^## Spec Metadata$|^## Paths & Locations$|^## cgpt Quick Reference$|^## Spec Maintenance$/{print NR": "$0}' docs/customize.md | cgpt -t2
**
↳ exit 0

### Command @ 2025-08-19 14:21:22 EDT
**set today (date -u +"%Y-%m-%d")
sed -i "s/^-\s\?Last updated: .*/- Last updated: $today/" docs/customize.md
git add docs/customize.md
git commit -m "docs(customize): bump Last updated date"**
↳ exit 0

### Command @ 2025-08-19 14:21:38 EDT
**ctxsum**

## Summary (fill me)
### Background
- 

### Decisions made
- 

### Current status
- 

### Open questions / next steps
- 

↳ exit 0

### Command @ 2025-08-19 14:23:39 EDT
**# 1) See exact status + CDN headers (rate limit, cache, POP)
for u in \
  https://raw.githubusercontent.com/ishist/context-vault/main/docs/customize.md \
  https://raw.githubusercontent.com/ishist/context-vault/main/docs/file-index.md
echo "== $u =="
curl -I -sS $u | cgpt -t2 http
end**
↳ exit 0

### Command @ 2025-08-19 14:23:56 EDT
**# 1) See exact status + CDN headers (rate limit, cache, POP)
for u in \
  https://raw.githubusercontent.com/ishist/context-vault/main/docs/customize.md \
  https://raw.githubusercontent.com/ishist/context-vault/main/docs/file-index.md
echo "== $u =="
curl -I -sS $u | cgpt -t2 http
end

# 2) Try alternate CDN paths (bypasses raw. host):
#    jsDelivr (GitHub -> CDN):
for p in docs/customize.md docs/file-index.md
set u https://cdn.jsdelivr.net/gh/ishist/context-vault@main/$p
echo "== $u =="; curl -I -sS $u | cgpt -t2 http
end

# 3) Force IPv4 vs IPv6 (helps isolate v6 path issues)
for flg in --ipv4 --ipv6
echo "== raw.githubusercontent.com $flg =="
curl $flg -I -sS https://raw.githubusercontent.com/ishist/context-vault/main/docs/customize.md | cgpt -t2 http
end

# 4) DNS sanity (see which POPs you resolve to)
for host in raw.githubusercontent.com raw.githack.com
echo "== $host =="; dig +short $host
end

# 5) Verbose TLS handshake (look for handshake resets/MITM)
echo "== TLS =="
curl -v -I https://raw.githubusercontent.com/ishist/context-vault/main/docs/customize.md ^/dev/null | cgpt -t2 http

# 6) User-Agent swap (some mirrors filter default curl UA)
curl -I -sS -H "User-Agent: Mozilla/5.0" https://raw.githack.com/ishist/context-vault/main/docs/customize.md | cgpt -t2 http
**
↳ exit 0

### Command @ 2025-08-19 14:27:05 EDT
**mkdir -p ~/Downloads/ctx && cd ~/Downloads/ctx**
↳ exit 0

### Command @ 2025-08-19 14:27:14 EDT
**fetch_ctx docs/customize.md customize.md
fetch_ctx docs/file-index.md file-index.md**
↳ exit 0

### Command @ 2025-08-19 14:28:35 EDT
**function fetch_ctx --description "Fetch GitHub raw with fallbacks (v4 first)"
set -l repo ishist/context-vault
set -l ref  main
set -l path $argv[1]
set -l out  $argv[2]

test -n "$path"; or begin
echo "usage: fetch_ctx <repo-path> [outfile]" >&2; return 2
end
test -n "$out"; or set out (basename $path)

set -l raw https://raw.githubusercontent.com/$repo/$ref/$path
set -l api https://api.github.com/repos/$repo/contents/$path?ref=$ref
set -l cdn https://cdn.jsdelivr.net/gh/$repo@$ref/$path

# try raw (IPv4), then API (raw accept), then jsDelivr; each with retries
for u in $raw $api $cdn
if string match -q "*api.github.com*" $u
set -l ok (curl --ipv4 -fsS --retry 4 --retry-delay 2 \
                -H "Accept: application/vnd.github.v3.raw" -o $out $u; echo $status)
else
set -l ok (curl --ipv4 -fsS --retry 4 --retry-delay 2 -o $out $u; echo $status)
end
test $ok -eq 0; and begin
echo "saved $path → $out (via $u)"; return 0
end
end

# last-resort: try IPv6 once for raw.githubusercontent
curl --ipv6 -fsS --retry 2 --retry-delay 2 -o $out $raw; and begin
echo "saved $path → $out (via IPv6 raw)"; return 0
end

echo "fetch_ctx: failed to fetch $path from all sources" >&2
return 1
end
**
↳ exit 0

### Command @ 2025-08-19 14:28:41 EDT
**fetch_ctx docs/customize.md customize.md
fetch_ctx docs/file-index.md file-index.md**
↳ exit 0

### Command @ 2025-08-19 14:30:37 EDT
**ctximport ~/Downloads/2025-08-19-profile-bootstrap-lock-context-dump.md**
↳ exit 0

### Command @ 2025-08-19 14:30:44 EDT
**ctxdone > ~/Downloads/(date)-context-vault-review.md**
↳ exit 0

### Command @ 2025-08-19 14:41:20 EDT
**paru -S ghostty**
↳ exit 0

### Command @ 2025-08-19 14:41:58 EDT
**kitty --version
ghostty --version**
↳ exit 0

### Command @ 2025-08-19 14:42:18 EDT
**ghostty --shell (which fish)**
↳ exit 0

### Command @ 2025-08-19 14:42:39 EDT
**ghostty --shell (which fish) | cgpt**
↳ exit 0

### Command @ 2025-08-19 14:46:28 EDT
**ghostty**
↳ exit 0
↳ exit 0

### Command @ 2025-08-19 15:37:16 EDT
**ctxsum**

## Summary (fill me)
### Background
- 

### Decisions made
- 

### Current status
- 

### Open questions / next steps
- 

↳ exit 0

### Command @ 2025-08-19 21:35:56 EDT
**ml4w**
↳ exit 0

### Command @ 2025-08-19 22:04:59 EDT
**micro # ~/.config/kitty/pipboy.conf**
↳ exit 0

### Command @ 2025-08-19 22:05:41 EDT
**cd ~/.config/kitty/**
↳ exit 0

### Command @ 2025-08-19 22:05:43 EDT
**ls**
↳ exit 0

### Command @ 2025-08-19 22:06:18 EDT
**micro ~/.config/kitty/pipboy.conf**
↳ exit 0

### Command @ 2025-08-19 22:06:42 EDT
**kitty --config ~/.config/kitty/pipboy.conf**
↳ exit 0

### Command @ 2025-08-19 22:08:00 EDT
**kitty --config ~/.config/kitty/pipboy.conf**
↳ exit 0

### Command @ 2025-08-19 22:09:54 EDT
**micro ~/.config/kitty/kitty.conf**
↳ exit 0

### Command @ 2025-08-19 22:11:00 EDT
**./custom.conf**
↳ exit 0

### Command @ 2025-08-19 22:12:54 EDT
**function fish_prompt
set_color brgreen
echo -n "[VAULT-TEC]"
set_color green
echo -n " > "
set_color normal
end
**
↳ exit 0

### Command @ 2025-08-19 22:13:00 EDT
**cd ..**
↳ exit 0

### Command @ 2025-08-19 22:13:41 EDT
**ls**
↳ exit 0

### Command @ 2025-08-19 22:17:52 EDT
**fish_config theme show**
↳ exit 0

### Command @ 2025-08-19 22:27:36 EDT
**micro ~/.config/kitty/pipboy.conf**
↳ exit 0

### Command @ 2025-08-19 22:29:03 EDT
**function fish_prompt
set_color brgreen
echo -n "[VAULT-TEC]"
set_color green
echo -n " > "
set_color normal
end**
↳ exit 0

### Command @ 2025-08-19 22:29:18 EDT
**set -Ux LS_COLORS "di=32:ex=92:ln=32:*.sh=92"**
↳ exit 0

### Command @ 2025-08-19 22:29:21 EDT
**ls**
↳ exit 0

### Command @ 2025-08-19 22:30:47 EDT
**begin
echo '# Pip-Boy (Fallout) – Kitty palette'
echo 'foreground   #14ff14'
echo 'background   #000000'
echo 'cursor       #14ff14'
echo 'selection_foreground #000000'
echo 'selection_background #14ff14'
# ANSI 0–7
echo 'color0  #000000'   # black
echo 'color1  #0faa0f'   # "red" → dark green
echo 'color2  #00aa00'   # green (dim)
echo 'color3  #55ff55'   # yellow → light green
echo 'color4  #00aa00'   # blue  → green
echo 'color5  #14ff14'   # magenta → bright green
echo 'color6  #00aa00'   # cyan → green
echo 'color7  #c0ffc0'   # white → pale green-white
# ANSI 8–15 (bright)
echo 'color8  #003300'
echo 'color9  #14ff14'
echo 'color10 #14ff14'
echo 'color11 #aaffaa'
echo 'color12 #14ff14'
echo 'color13 #14ff14'
echo 'color14 #14ff14'
echo 'color15 #ffffff'
end > ~/.config/kitty/pipboy.conf
**
↳ exit 0

### Command @ 2025-08-19 22:31:15 EDT
**# Enable (theme + prompt + ls colors)
begin
echo 'function pipboy_on'
echo '    # Backup existing prompt once'
echo '    if not functions -q fish_prompt_backup; and functions -q fish_prompt'
echo '        functions -c fish_prompt fish_prompt_backup'
echo '    end'
echo ''
echo '    # Pip-Boy prompt: [VAULT-TEC] >  (bright + dim green)'
echo '    function fish_prompt --description "Pip-Boy prompt"'
echo '        set_color brgreen; echo -n "[VAULT-TEC]";'
echo '        set_color green;   echo -n " > ";'
echo '        set_color normal'
echo '    end'
echo ''
echo '    # Readable Fallout-y ls: dirs=dim green, execs=bright, links=dim'
echo '    set -Ux LS_COLORS "di=32:ex=92:ln=32:*.sh=92:*.md=37"'
echo ''
echo '    # Push Kitty colors to all windows (remote control)'
echo '    if type -q kitty'
echo '        kitty @ set-colors --all --configured ~/.config/kitty/pipboy.conf ^/dev/null'
echo '    end'
echo ''
echo '    echo "Pip-Boy mode: ON" | cgpt md'
echo 'end'
end > ~/.config/fish/functions/pipboy_on.fish

# Disable (restore prompt + clear theme/env)
begin
echo 'function pipboy_off'
echo '    if functions -q fish_prompt_backup'
echo '        functions -c fish_prompt_backup fish_prompt'
echo '        functions -e fish_prompt_backup'
echo '    end'
echo ''
echo '    # Remove LS_COLORS override'
echo '    set -eU LS_COLORS'
echo ''
echo '    # Reload Kitty base config (if include not present, this just reloads current)'
echo '    if type -q kitty'
echo '        kitty @ set-colors --all --reload ^/dev/null'
echo '    end'
echo ''
echo '    echo "Pip-Boy mode: OFF" | cgpt md'
echo 'end'
end > ~/.config/fish/functions/pipboy_off.fish

# Make fish pick up the new functions now
functions -c pipboy_on pipboy_on >/dev/null 2>&1
functions -c pipboy_off pipboy_off >/dev/null 2>&1
**
↳ exit 0

### Command @ 2025-08-19 22:31:28 EDT
**pipboy_on**
↳ exit 0

### Command @ 2025-08-19 22:31:57 EDT
**-c pipboy_on pipboy_on >/dev/null 2>&1**
↳ exit 0

### Command @ 2025-08-19 22:32:32 EDT
**source ~/.config/fish/functions/pipboy_on.fish
source ~/.config/fish/functions/pipboy_off.fish**
↳ exit 0

### Command @ 2025-08-19 22:32:35 EDT
**pipboy_on**
↳ exit 0

### Command @ 2025-08-19 22:32:54 EDT
**funcsave pipboy_on
funcsave pipboy_off**
↳ exit 0

### Command @ 2025-08-19 22:32:59 EDT
**pipboy_on**
↳ exit 0

### Command @ 2025-08-19 22:33:26 EDT
**function pipboy_on
# Backup existing prompt once
if not functions -q fish_prompt_backup; and functions -q fish_prompt
functions -c fish_prompt fish_prompt_backup
end

# Pip-Boy prompt: [VAULT-TEC] >
function fish_prompt --description "Pip-Boy prompt"
set_color brgreen; echo -n "[VAULT-TEC]"
set_color green;   echo -n " > "
set_color normal
end

# Fallout-ish ls colors
set -Ux LS_COLORS "di=32:ex=92:ln=32:*.sh=92:*.md=37"

# Push Kitty colors
if type -q kitty
kitty @ set-colors --all --configured ~/.config/kitty/pipboy.conf >/dev/null 2>&1
end

echo "Pip-Boy mode: ON" | cgpt md
end

function pipboy_off
if functions -q fish_prompt_backup
functions -c fish_prompt_backup fish_prompt
functions -e fish_prompt_backup
end

set -eU LS_COLORS

if type -q kitty
kitty @ set-colors --all --reload >/dev/null 2>&1
end

echo "Pip-Boy mode: OFF" | cgpt md
end**
↳ exit 0

### Command @ 2025-08-19 22:33:29 EDT
**funcsave pipboy_on
funcsave pipboy_off**
↳ exit 0

### Command @ 2025-08-19 22:33:36 EDT
**pipboy_on**
↳ exit 0

### Command @ 2025-08-19 22:33:40 EDT
**test**
↳ exit 0

### Command @ 2025-08-19 22:33:42 EDT
**ls**
↳ exit 0

### Command @ 2025-08-19 22:33:47 EDT
**clear**
↳ exit 0
